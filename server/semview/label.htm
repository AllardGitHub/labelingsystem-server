<html>
<head>
<script src="https://code.jquery.com/jquery-1.12.0.js"></script>
<script>
// read params via javascript
function getUrlVars() {
	var vars = {};
	var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
		vars[key] = value;
	});
	return vars;
}
var ID = getUrlVars()["id"];
console.info(ID);

$(document).ready(function() {
	var servlethost = "labeling.i3mainz.hs-mainz.de";
	//var servlethost = "localhost:8084";
	var url = "http://"+servlethost+"/api/v1/labels/"+ID;
	$.ajax({
	    url:url,
	    type: "GET",
		headers: {
			Accept : "application/rdf+json"
		},
	    async: false,
	    error:function(jqXHR, textStatus, errorThrown) {
	    	console.error(textStatus);
	    },
	    success:function(response) {
	    	try {
				response = JSON.parse(response);
			} catch (e) {}
	    	console.info(response);
			$("#content").append("<h1>SemanticTable "+ID+"</h1>");
			$("#content").append('<p>Resource: ' + ID + '</p>');
			for (var key in response) {
    			$("#content").append('<p>Resource: ' + key + '</p>');
			}
			$("#content").append('<p>Semantic View: ' + '<a href="../detail/label.htm?id='+ID+'">Detail View</a>' + '</p>');
			$("#content").append('<p>Data: ' + '<a href="http://'+servlethost+'/api/v1/labels/'+ID+'.json">JSON</a> <a href="http://'+servlethost+'/api/v1/labels/'+ID+'.xml">XML</a> <a href="http://'+servlethost+'/api/v1/labels/'+ID+'.rdf">RDF</a> <a href="http://'+servlethost+'/api/labels/'+ID+'.ttl">TTL</a> <a href="http://'+servlethost+'/api/v1/labels/'+ID+'.n3">N-Triples</a> <a href="http://'+servlethost+'/api/v1/labels/'+ID+'.jsonld">JSON-LD</a> <a href="http://'+servlethost+'/api/v1/labels/'+ID+'.ttl">TTL</a>' + '</p>');
	    	var tableHTML = "";
			tableHTML += "<table border='1'>";
			for (var key in response) {
	    		for (var item in response[key]) {
	    			for (var i=0; i<response[key][item].length; i++) {
						tableHTML += "<tr>";
						tableHTML += '<td><b>'+item+'</b></td><td>'+response[key][item][i]["value"]+'</td>';
						tableHTML += "</tr>";
					}
	    		}
			}
			$("#content").append(tableHTML);
	    }
	});
});
</script>
</head>
<body>
<div id="content"></div>
</body>
</html>